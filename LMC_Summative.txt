# Enter assembler code here
#
# To add comments begin lines with #
# Code lines have 3 entries separated by tabs
# > First an optional label,
# > second an instruction mnemonic, and 
# > third an address label if required.
#
# Valid mnemonics are:
# HLT, ADD, SUB, STO, LDA,
# BR, BRZ, BRP, IN, OUT, DAT

# Get inputs; check if bases > 0 and < 11.
	IN
	STO	num
	IN
	STO	base_a
	SUB	eleven
	BRP	error
	IN
	STO	base_b
	SUB	eleven
	BRP	error
# Convert to base 10
divide	LDA	num
	SUB	ten
	BRP	pos
	LDA	num
	SUB	base_a
	BRP	error
b_ten	LDA	num
	BRZ	finish
	SUB	one
	STO	num
	LDA	inter
	ADD	posit
	STO	inter
	BR	b_ten
pos	STO	num
	LDA	q
	ADD	one
	STO	q
	BR	divide

finish	LDA	q
	BRZ	change
	STO	num
	LDA	base_a
	STO	counter
times	LDA	counter
	BRZ	up_posi
	SUB	one
	STO	counter
	LDA	hold
	ADD	posit
	STO	hold
	BRZ	error
	BR	times
up_posi	LDA	hold
	STO	posit
	LDA	zero
	STO	counter
	STO	q
	STO	hold
	BR	divide

# Commence second round
change	LDA	step
	BRZ	result
	SUB	one
	STO	step
	LDA	inter
	STO	num
	LDA	ten
	STO	base_a
	LDA	base_b
	STO	ten
	LDA	zero
	STO	inter
	LDA	one
	STO	posit
	BR	divide
	
# Display error message
error	LDA	msg
	BR	end

# Display result
result	LDA	inter
end	OUT
	HLT

num	DAT
base_a	DAT
base_b	DAT
msg	DAT	999
zero	DAT	000
one	DAT	001
ten	DAT	010
eleven	DAT	011
q	DAT	000
counter	DAT	000
posit	DAT	001	
inter	DAT	000
hold	DAT	000
step	DAT	001















